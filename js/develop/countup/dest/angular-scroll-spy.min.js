!function(a){"use strict";a.module("scrollSpyModule",[]).directive("scrollSpy",["$window","$rootScope","$log",function(b,c,d){return{restrict:"A",link:function(d,e,f){function g(){var a,d,e,g=this,h=!1,i=!1,j=!1,k=!1,l=document.documentElement,m=f.id||"unknown element",n=document.getElementById(m),o=!1;this.determinePosition=function(){if(h){var b=window.pageYOffset||l.scrollTop;k||(b+a<e||b>e+d)&&(k=!0,j=!1,c.$broadcast("elementScrolledOutOfView",m)),(b+a>=e+1*d&&e>b||b>=e&&o)&&(i||(i=!0,c.$broadcast("elementFirstScrolledIntoView",m)),j||(j=!0,k=!1,c.$broadcast("elementScrolledIntoView",m)))}},this.takeMeasurements=function(){a=b.innerHeight,d=n.offsetHeight,e=n.offsetTop,a<d&&(o=!0),h=!0,g.determinePosition()};var p=setInterval(function(){n.offsetHeight>2&&(clearTimeout(p),g.takeMeasurements())},50)}var h=f.id+"-scrollSpy";c[h]=new g,c.globalOnScrollFunctions||(c.globalOnScrollFunctions=[]),c.globalOnScrollFunctions.push(c[h]),c.globalOnScroll||(c.globalOnScroll=function(){a.forEach(c.globalOnScrollFunctions,function(a,b){a.determinePosition()})},b.onscroll=c.globalOnScroll)}}}])}(angular);